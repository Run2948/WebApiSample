<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Api接口测试页面</title>
    <link href="//cdn.bootcss.com/twitter-bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="//cdn.bootcss.com/jquery/2.0.3/jquery.js"></script>
</head>
<body>
<div class="row col-md-10">
    <h4>&nbsp;</h4>
    <input type="button" class="btn btn-success" onclick="add()" value="POST"/>
    <input type="button" class="btn btn-success" onclick="getBooks()" value="GET"/>
    <input type="button" class="btn btn-success" onclick="getBook(2)" value="GET"/>
    <input type="button" class="btn btn-success" onclick="del(1)" value="DELETE"/>
    <input type="button" class="btn btn-success" onclick="update(1)" value="PUT"/>
    <input type="button" class="btn btn-success" onclick="getJsonpBooks()" value="GET JSONP"/>
</div>

<script type="text/javascript">
    var basePath = "//127.0.0.1:52643";
    var bookApi = basePath + "/api/book/";

    function getBooks() {
        $.getJSON(bookApi,
            function(data) {
                alert(JSON.stringify(data));
        });
    }

    function getJsonpBooks() {
        $.ajax({
            url: bookApi,
            type: 'GET',
            dataType:'jsonp',
            success: function(data) {
                alert(JSON.stringify(data));
            },
            error: function(err) {
                alert(err);
            }
        });
    }

    function getBook(id) {
        $.getJSON(bookApi+id,
            function(data) {
                alert(JSON.stringify(data));
            });
    }

    function add() {
        $.ajax({
            url: bookApi,
            type: 'POST',
            data: { Name: "Java 程序设计", Price: 19.8 },
            success: function(data) {
                alert(JSON.stringify(data));
            },
            error: function(err) {
                alert(err);
            }
        });
    }

    function update(id) {
        $.ajax({
            url: bookApi + id,
            type: 'PUT',
            data: { Name: "Java 程序设计2", Price: 19.8 },
            success: function(data) {
                alert(JSON.stringify(data));
            },
            error: function(err) {
                alert(err);
            }
        });
    }

    function del(id) {
        $.ajax({
            url: bookApi + id,
            type: 'DELETE',
            data: {  },
            success: function(data) {
                alert(JSON.stringify(data));
            },
            error: function(err) {
                alert(err);
            }
        });
    }
</script>
</body>
</html>